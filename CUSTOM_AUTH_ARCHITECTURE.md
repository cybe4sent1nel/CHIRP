# ğŸ—ï¸ Custom Authentication System Architecture

## System Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CHIRP AUTHENTICATION                         â”‚
â”‚                         DUAL AUTH SYSTEM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FRONTEND (React)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ CustomAuth  â”‚  â”‚ForgotPasswordâ”‚  â”‚ VerifyEmail  â”‚               â”‚
â”‚  â”‚  /auth      â”‚  â”‚/forgot-pwd   â”‚  â”‚/verify-email â”‚               â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚              â”‚               â”‚
â”‚  â”‚ â€¢ Login     â”‚  â”‚ â€¢ Email Step â”‚  â”‚ â€¢ Success    â”‚               â”‚
â”‚  â”‚ â€¢ Signup    â”‚  â”‚ â€¢ Reset Step â”‚  â”‚ â€¢ Error      â”‚               â”‚
â”‚  â”‚ â€¢ Google    â”‚  â”‚ â€¢ Validation â”‚  â”‚ â€¢ Redirect   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                  â”‚                 â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                            â”‚                                         â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                   â”‚  AuthContext    â”‚                                â”‚
â”‚                   â”‚  (State Mgmt)   â”‚                                â”‚
â”‚                   â”‚                 â”‚                                â”‚
â”‚                   â”‚ â€¢ customUser    â”‚                                â”‚
â”‚                   â”‚ â€¢ clerkUser     â”‚                                â”‚
â”‚                   â”‚ â€¢ token         â”‚                                â”‚
â”‚                   â”‚ â€¢ login()       â”‚                                â”‚
â”‚                   â”‚ â€¢ signup()      â”‚                                â”‚
â”‚                   â”‚ â€¢ logout()      â”‚                                â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                            â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    HTTP/HTTPS Requests
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (Node.js/Express)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Auth Routes (/api/auth/*)                  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ POST   /signup           â†’ authController.signup              â”‚   â”‚
â”‚  â”‚ POST   /login            â†’ authController.login               â”‚   â”‚
â”‚  â”‚ GET    /verify-email     â†’ authController.verifyEmail         â”‚   â”‚
â”‚  â”‚ POST   /forgot-password  â†’ authController.forgotPassword      â”‚   â”‚
â”‚  â”‚ POST   /reset-password   â†’ authController.resetPassword       â”‚   â”‚
â”‚  â”‚ GET    /verify-token     â†’ authController.verifyToken         â”‚   â”‚
â”‚  â”‚ GET    /google           â†’ passport.authenticate('google')    â”‚   â”‚
â”‚  â”‚ GET    /google/callback  â†’ OAuth callback handler            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Auth Controller                              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ signup()                                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Validate input                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ Check existing user                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Hash password (bcrypt, 12 rounds)                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Generate verification token                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ Create user in DB                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Send welcome email                                       â”‚   â”‚
â”‚  â”‚  â””â”€ Send verification email                                  â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ login()                                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ Find user by email/username                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ Verify password (bcrypt.compare)                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ Generate JWT (30-day expiry)                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ Send login alert email                                   â”‚   â”‚
â”‚  â”‚  â””â”€ Return token + user                                      â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ forgotPassword()                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ Find user by email                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ Generate reset token (crypto)                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Hash token (SHA256)                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Set 1-hour expiry                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Save to DB                                               â”‚   â”‚
â”‚  â”‚  â””â”€ Send reset email with link                               â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ resetPassword()                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ Hash incoming token                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Find user with valid token                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ Check expiry                                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ Hash new password                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Clear reset token                                        â”‚   â”‚
â”‚  â”‚  â””â”€ Send confirmation email                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                Passport Strategies                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ LocalStrategy                                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ Accept identifier (email/username)                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ Find user in DB                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Compare password (bcrypt)                                â”‚   â”‚
â”‚  â”‚  â””â”€ Return user or error                                     â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ GoogleStrategy                                                â”‚   â”‚
â”‚  â”‚  â”œâ”€ Receive Google profile                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Check for existing googleId                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ Link to email if exists                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Create new user if not exists                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Set emailVerified=true                                   â”‚   â”‚
â”‚  â”‚  â””â”€ Return user                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Session & Middleware                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ express-session                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ MongoStore (session in DB)                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ 30-day cookie expiry                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ httpOnly + secure flags                                  â”‚   â”‚
â”‚  â”‚  â””â”€ SESSION_SECRET encryption                                â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ passport.initialize()                                         â”‚   â”‚
â”‚  â”‚ passport.session()                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB      â”‚              â”‚  Email System      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                â”‚              â”‚                    â”‚
â”‚ Users          â”‚              â”‚ Inngest Queue      â”‚
â”‚  â€¢ _id         â”‚              â”‚  â€¢ app/send-email  â”‚
â”‚  â€¢ email       â”‚              â”‚  â€¢ Reliable        â”‚
â”‚  â€¢ password    â”‚              â”‚  â€¢ Retry logic     â”‚
â”‚  â€¢ username    â”‚              â”‚                    â”‚
â”‚  â€¢ authProviderâ”‚              â”‚ Direct Fallback    â”‚
â”‚  â€¢ googleId    â”‚              â”‚  â€¢ Nodemailer      â”‚
â”‚  â€¢ emailVer... â”‚              â”‚  â€¢ SMTP            â”‚
â”‚  â€¢ verific...  â”‚              â”‚  â€¢ Immediate       â”‚
â”‚  â€¢ resetToken  â”‚              â”‚                    â”‚
â”‚  â€¢ resetExpiry â”‚              â”‚ Templates          â”‚
â”‚                â”‚              â”‚  â€¢ Welcome         â”‚
â”‚ Sessions       â”‚              â”‚  â€¢ Verification    â”‚
â”‚  â€¢ session_id  â”‚              â”‚  â€¢ Password Reset  â”‚
â”‚  â€¢ user_id     â”‚              â”‚  â€¢ Pwd Changed     â”‚
â”‚  â€¢ expires     â”‚              â”‚  â€¢ Login Alert     â”‚
â”‚  â€¢ data        â”‚              â”‚  â€¢ New Message     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â€¢ Connection Req  â”‚
                                â”‚  â€¢ Acct Deletion   â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Authentication Flow Diagrams

### 1. Signup Flow

```
User                Frontend              Backend               MongoDB          Email
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚â”€â”€Fill Formâ”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                     â”‚               â”‚
 â”‚   (email, pwd)     â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚â”€â”€Submitâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚â”€â”€POST /signupâ”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Check Email Existsâ–¶â”‚               â”‚
 â”‚                    â”‚                     â”‚â—€â”€Not Foundâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Hash Passwordâ”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚  (bcrypt 12 rounds) â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Generate Tokenâ”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚  (crypto.random)    â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Create Userâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                    â”‚                     â”‚â—€â”€User Savedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Send Emailsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                    â”‚                     â”‚  â€¢ Welcome                          â”‚
 â”‚                    â”‚                     â”‚  â€¢ Verification                     â”‚
 â”‚                    â”‚                     â”‚                                     â”‚
 â”‚                    â”‚â—€â”€JWT Token + Userâ”€â”€â”‚                                     â”‚
 â”‚â—€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                                     â”‚
 â”‚  Redirect to /     â”‚                     â”‚                                     â”‚
 â”‚                    â”‚                                                           â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Email Receivedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                                                                                â”‚
 â”‚â”€â”€Click Linkâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  /verify-email?token=xyz                                                      â”‚
```

### 2. Login Flow

```
User                Frontend              Backend               MongoDB          Email
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚â”€â”€Enter Credsâ”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                     â”‚               â”‚
 â”‚   (email, pwd)     â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚â”€â”€Submitâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚â”€â”€POST /loginâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Find Userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                    â”‚                     â”‚â—€â”€User Foundâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Verify Passwordâ”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚  bcrypt.compare()   â”‚               â”‚
 â”‚                    â”‚                     â”‚  âœ“ Match            â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Generate JWTâ”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                    â”‚                     â”‚  (30-day expiry)    â”‚               â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚                     â”‚â”€â”€Send Alert Emailâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                    â”‚                     â”‚                     â”‚               â”‚
 â”‚                    â”‚â—€â”€JWT Token + Userâ”€â”€â”‚                     â”‚               â”‚
 â”‚â—€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚               â”‚
 â”‚  Store token       â”‚                     â”‚                     â”‚               â”‚
 â”‚  Redirect to /     â”‚                     â”‚                     â”‚               â”‚
```

### 3. Google OAuth Flow

```
User         Frontend       Backend         Google OAuth      MongoDB       Email
 â”‚              â”‚              â”‚                  â”‚              â”‚            â”‚
 â”‚â”€â”€Clickâ”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚                  â”‚              â”‚            â”‚
 â”‚  "Google"    â”‚              â”‚                  â”‚              â”‚            â”‚
 â”‚              â”‚              â”‚                  â”‚              â”‚            â”‚
 â”‚              â”‚â”€â”€GET /googleâ–¶â”‚                  â”‚              â”‚            â”‚
 â”‚              â”‚              â”‚                  â”‚              â”‚            â”‚
 â”‚              â”‚              â”‚â”€â”€Redirectâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚            â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚            â”‚
 â”‚                    Google Login Page           â”‚              â”‚            â”‚
 â”‚â”€â”€Select Accountâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚            â”‚
 â”‚                                                 â”‚              â”‚            â”‚
 â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â”‚
 â”‚                                  â”‚ Callback                    â”‚            â”‚
 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚            â”‚
 â”‚              â”‚  /api/auth/google/callback    â”‚                 â”‚            â”‚
 â”‚              â”‚                                â”‚                 â”‚            â”‚
 â”‚              â”‚  â”œâ”€ Receive profile           â”‚                 â”‚            â”‚
 â”‚              â”‚  â”œâ”€ Check existing userâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚
 â”‚              â”‚  â”‚   by googleId              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
 â”‚              â”‚  â”‚                            â”‚                 â”‚            â”‚
 â”‚              â”‚  â”œâ”€ Create if not existsâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚
 â”‚              â”‚  â”‚   emailVerified=true       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
 â”‚              â”‚  â”‚                            â”‚                               â”‚
 â”‚              â”‚  â”œâ”€ Generate JWT             â”‚                               â”‚
 â”‚              â”‚  â”‚                            â”‚                               â”‚
 â”‚              â”‚  â””â”€ Redirect to frontendâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€with token in URL          â”‚                               â”‚
 â”‚              â”‚                                â”‚                               â”‚
 â”‚  Store token â”‚                                â”‚                               â”‚
 â”‚  Redirect /  â”‚                                                                â”‚
```

### 4. Password Reset Flow

```
User            Frontend         Backend            MongoDB           Email
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚â”€â”€Forgot Pwdâ”€â”€â”€â”€â–¶â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚â”€â”€Enter Emailâ”€â”€â”€â–¶â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚â”€POST /forgotâ”€â”€â–¶â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Find Userâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                 â”‚                â”‚â—€â”€User Foundâ”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Generate Tokenâ”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚  crypto.random    â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Hash Tokenâ”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚  SHA256          â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Save Tokenâ”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                 â”‚                â”‚  + 1hr expiry     â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Send Emailâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                 â”‚                â”‚  with reset link                  â”‚
 â”‚                 â”‚                â”‚                                   â”‚
 â”‚                 â”‚â—€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”‚                                   â”‚
 â”‚â—€â”€Check Emailâ”€â”€â”€â”€â”‚                                                    â”‚
 â”‚                                                                      â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Email with Linkâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                                                                      â”‚
 â”‚â”€â”€Click Linkâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  /reset-password?token=xyz                                          â”‚
 â”‚                 â”‚                                                    â”‚
 â”‚â”€â”€Enter New Pwdâ”€â–¶â”‚                                                    â”‚
 â”‚                 â”‚                                                    â”‚
 â”‚                 â”‚â”€POST /resetâ”€â”€â”€â–¶â”‚                                   â”‚
 â”‚                 â”‚  + token       â”‚                                   â”‚
 â”‚                 â”‚                â”‚                                   â”‚
 â”‚                 â”‚                â”‚â”€â”€Hash Tokenâ”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Find Userâ”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                 â”‚                â”‚  with token       â”‚               â”‚
 â”‚                 â”‚                â”‚â—€â”€Found + Validâ”€â”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚  (not expired)    â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Hash New Pwdâ”€â”€â”€â”€â”€â”‚               â”‚
 â”‚                 â”‚                â”‚  bcrypt 12 rounds â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Update Userâ”€â”€â”€â”€â”€â–¶â”‚               â”‚
 â”‚                 â”‚                â”‚  clear token      â”‚               â”‚
 â”‚                 â”‚                â”‚                   â”‚               â”‚
 â”‚                 â”‚                â”‚â”€â”€Send Emailâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                 â”‚                â”‚  confirmation                     â”‚
 â”‚                 â”‚                â”‚                                   â”‚
 â”‚                 â”‚â—€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”‚                                   â”‚
 â”‚â—€â”€Redirect /authâ”€â”‚                                                    â”‚
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURITY LAYERS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Layer 1: Password Security                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ bcrypt Hashing                                       â”‚   â”‚
â”‚  â”‚  â€¢ 12 salt rounds                                    â”‚   â”‚
â”‚  â”‚  â€¢ One-way hash (cannot be decrypted)               â”‚   â”‚
â”‚  â”‚  â€¢ Unique salt per password                          â”‚   â”‚
â”‚  â”‚  â€¢ Slow by design (prevents brute force)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Layer 2: Token Security                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ JWT (JSON Web Tokens)                                â”‚   â”‚
â”‚  â”‚  â€¢ Signed with JWT_SECRET                            â”‚   â”‚
â”‚  â”‚  â€¢ 30-day expiry                                     â”‚   â”‚
â”‚  â”‚  â€¢ Contains user ID + email                          â”‚   â”‚
â”‚  â”‚  â€¢ Cannot be forged without secret                   â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Reset Tokens                                         â”‚   â”‚
â”‚  â”‚  â€¢ crypto.randomBytes(32)                            â”‚   â”‚
â”‚  â”‚  â€¢ SHA256 hashed before storage                      â”‚   â”‚
â”‚  â”‚  â€¢ 1-hour expiry                                     â”‚   â”‚
â”‚  â”‚  â€¢ Single use only                                   â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Verification Tokens                                  â”‚   â”‚
â”‚  â”‚  â€¢ crypto.randomBytes(32)                            â”‚   â”‚
â”‚  â”‚  â€¢ Hex encoded                                       â”‚   â”‚
â”‚  â”‚  â€¢ Cleared after verification                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Layer 3: Session Security                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Express Session                                       â”‚   â”‚
â”‚  â”‚  â€¢ Encrypted with SESSION_SECRET                     â”‚   â”‚
â”‚  â”‚  â€¢ Stored in MongoDB (not memory)                    â”‚   â”‚
â”‚  â”‚  â€¢ httpOnly cookies (no JS access)                   â”‚   â”‚
â”‚  â”‚  â€¢ secure flag in production (HTTPS)                 â”‚   â”‚
â”‚  â”‚  â€¢ 30-day cookie expiry                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Layer 4: Transport Security                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ HTTPS/TLS                                            â”‚   â”‚
â”‚  â”‚  â€¢ All production traffic encrypted                  â”‚   â”‚
â”‚  â”‚  â€¢ Certificates managed by Netlify                   â”‚   â”‚
â”‚  â”‚  â€¢ secure cookies only over HTTPS                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Layer 5: Email Security                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Secure Links                                         â”‚   â”‚
â”‚  â”‚  â€¢ Tokens in URL params (not body)                   â”‚   â”‚
â”‚  â”‚  â€¢ One-time use tokens                               â”‚   â”‚
â”‚  â”‚  â€¢ Time-limited validity                             â”‚   â”‚
â”‚  â”‚  â€¢ HTTPS links only                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚  (Frontend)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. User Action (login/signup)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AuthContext    â”‚  â† Token stored in localStorage
â”‚  (State Mgmt)   â”‚  â† User data cached
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. API Call with credentials
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Routes     â”‚
â”‚  (/api/auth/*)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Route to controller
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Controller   â”‚
â”‚  (Business Logic)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ 4a. Validate input
       â”‚
       â”œâ”€ 4b. Hash/verify password
       â”‚
       â”œâ”€ 4c. Generate tokens
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Passport     â”‚
â”‚  (Strategies)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Authenticate
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MongoDB     â”‚  â† User data stored
â”‚  (Database)    â”‚  â† Sessions stored
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. User retrieved/saved
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email System   â”‚
â”‚ (Inngest/SMTP) â”‚  â† Emails queued
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Response
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚  â† Token received
â”‚  (Frontend)  â”‚  â† User logged in
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

```
Frontend:
â”œâ”€â”€ React (UI framework)
â”œâ”€â”€ React Router (routing)
â”œâ”€â”€ Axios (HTTP client)
â”œâ”€â”€ Lottie React (animations)
â”œâ”€â”€ Lucide React (icons)
â””â”€â”€ React Hot Toast (notifications)

Backend:
â”œâ”€â”€ Node.js (runtime)
â”œâ”€â”€ Express (web framework)
â”œâ”€â”€ Passport.js (authentication)
â”‚   â”œâ”€â”€ passport-local
â”‚   â””â”€â”€ passport-google-oauth20
â”œâ”€â”€ bcryptjs (password hashing)
â”œâ”€â”€ jsonwebtoken (JWT)
â”œâ”€â”€ express-session (sessions)
â”œâ”€â”€ connect-mongo (session store)
â””â”€â”€ nodemailer (emails)

Database:
â””â”€â”€ MongoDB (user data, sessions)

Email Queue:
â”œâ”€â”€ Inngest (primary)
â””â”€â”€ Nodemailer (fallback)

External Services:
â”œâ”€â”€ Google OAuth (authentication)
â”œâ”€â”€ Brevo/SendGrid (SMTP)
â””â”€â”€ Clerk (optional auth)
```

---

**Architecture designed for security, scalability, and reliability!**
